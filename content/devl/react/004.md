---
layout : post
title : "React #4 ê¸°ì´ˆ"
date: 2024-01-16
summary:
categories : [ react ]
tags : [ bitcamp,  naverCloudCamp ]
---

### useRef

* useRef : ê°’ì´ ë³€ê²½ë¼ë„ í™”ë©´ì´ ë‹¤ì‹œ ëœë”ë§ë˜ì§€ ì•ŠìŒ 
  * ê°’ì´ ë³€ê²½ ì‹œ í™”ë©´ì— ë°”ë¡œ ì ìš©ë˜ëŠ” stateì™€ëŠ” ë‹¬ë¦¬ ë‹¹ì¥ í™”ë©´ì— ì¶œë ¥í•  í•„ìš”ì—†ì´ ë‚´ë¶€ì ì¸ ê°’ë§Œ ë°”ë€Œë©´ ë˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤. 
  * ìƒˆë¡œê³ ì¹¨ ì‹œ ë³€ê²½ëœ ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```js
//1. state
const [count, setCount] = useState(0);

//2. useRef
const countRef = useRef(0);
```

```js
<Button variant='outlined' color='success' size='small'
                    onClick = {()=>setCount(count + 1)}> 
  count ë³€ìˆ˜ ì¦ê°€</Button>

<Button variant='outlined' color='primary' size='small'
        onClick = {() => {
          countRef.current = countRef.current + 1;
          // í™”ë©´ì— ë°”ë¡œ ë³´ì´ì§€ ì•Šê¸° ë•Œë¬¸ì— ì½˜ì†”ë¡œ í™•ì¸í•˜ê¸°.
          console.log("countRef.current" + countRef.current);
        }}> 
  useRef ë³€ìˆ˜ ì¦ê°€</Button>
```

### useRefë¥¼ ì´ìš©í•´ì„œ ê°’ ì…ë ¥í•˜ê¸°

#### ìƒìˆ˜ ì„ ì–¸

```js
const [msg, setMsg] = useState('');
const nameRef = useRef('');
const korRef = useRef(0);
const engRef = useRef(0);
```

#### í¼ìƒì„±

```js
  <tr>
    <th style={{width:'100px'}}>ì´ë¦„</th>
    <td><input type='text' className='form-control' ref={nameRef}/></td>
  </tr>
  <tr>
    <th style={{width:'100px'}}>êµ­ì–´ ì ìˆ˜</th>
    <td><input type='text' className='form-control' ref={korRef}/></td>
  </tr>
  <tr>
    <th style={{width:'100px'}}>ì˜ì–´ ì ìˆ˜</th>
    <td><input type='text' className='form-control' ref={engRef}/></td>
  </tr>
  <tr>
    <td colSpan={2} align='center'>
      <Button color = 'info' variant='outlined' onClick ={buttonResult}>
        ê²°ê³¼ í™•ì¸
      </Button>
    </td>
  </tr>
  <tr style={{height:'100px'}}>
    <td colSpan={2} style={{whiteSpace:'pre-line', backgroundColor:'aliceblue'}}>
      <h4>{msg}</h4>
    </td>
  </tr>
```

#### ë²„íŠ¼ì´ë²¤íŠ¸

```js
const buttonResult = ()=> {
    
        //valueë¥¼ ë¶™ì—¬ì•¼í•¨ì— ìœ ì˜!!
        let name = nameRef.current.value;
        let kor = korRef.current.value;
        let eng = engRef.current.value;
        
        //ìˆ«ìì¸ì§€ í™•ì¸ í›„ ê²½ê³ 
        if (isNaN(kor) || isNaN(eng)) {
            alert("ì ìˆ˜ëŠ” ìˆ«ìë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
            return;
        }
        
        //ì´ì , í‰ê· 
        let total =  Number(kor) + Number(eng);
        let avg =  total / 2;
        
        //whiteSpace:'pre-line' ê°€ ì ìš©ë¼ìˆì–´ ì‘ì„±í•œ ê·¸ëŒ€ë¡œ ì¤„ë°”ê¿ˆë˜ì–´ ì¶œë ¥ë¨.
        let s = 
            `
            ì´ë¦„ : ${name}
            êµ­ì–´ ì ìˆ˜ : ${kor}
            ì˜ì–´ ì ìˆ˜ : ${eng}
            ì´ì  : ${total}
            í‰êµ° : ${avg}
            `;
        
        setMsg(s);  //stateë³€ìˆ˜ msgì— ê°’ ë„£ê¸°
        
        //ì…ë ¥ê°’ ì´ˆê¸°í™”
        nameRef.current.value = '';
        korRef.current.value = '';
        engRef.current.value = '';
        nameRef.current.focus = '';
    }
```

ì ìˆ˜ë¥¼ ì…ë ¥í•  ë•Œì—ëŠ” ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ì•Šìœ¼ë©°, ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œì—ë¯¼ ë Œë”ë§ ì‹¤í–‰ë¨.

(stateë³€ìˆ˜ì˜€ë‹¤ë©´ ì¦‰ì‹œ ë Œë”ë§ ë°˜ì˜ë¨.)

### í•˜ë‚˜ì˜ ë³€ìˆ˜ì— ì—¬ëŸ¬ ë°ì´í„° ì €ì¥í•˜ê¸°

ìƒìˆ˜ì„ ì–¸

```js
const [inputArray, setInputArray] = useState([]);

//ê°ì²´ë¥¼ ê°–ëŠ” ìƒíƒœ ë³€ìˆ˜
const [inputs, seetInputs] = useState({
  name:'',
  nickName:'',
  hp:'',
  addr:''
})
```


```js
<input type='text' className='form-control' value = {inputs.name} name='name'/>
<input type='text' className='form-control' value = {inputs.nickName} name='nickName'/>
<input type='text' className='form-control' value = {inputs.hp} name='hp'/>
<input type='text' className='form-control' value = {inputs.addr} name='addr'/>

<Button color='info' variant='outlined'>ë°°ì—´ì— ì¶”ê°€</Button>
<Button color='info' variant='outlined'>ì…ë ¥ê°’ ì´ˆê¸°í™”</Button>

<div style={{width:'450px'}}>
  ì¶œë ¥ <br/>
  name : {inputs.name}<br/>
  nickName : {inputs.nickName}<br/>
  hp : {inputs.hp}<br/>
  addr : {inputs.addr}<br/>
</div>
```

#### ì…ë ¥ì‹œ inputsì˜ í•´ë‹¹ ë©¤ë²„ë³€ìˆ˜ë¡œ ê°’ì´ ë“¤ì–´ê°€ê²Œ í•˜ê¸° ìœ„í•œ ì´ë²¤íŠ¸

```js
const inputChangeEvent = (e)=> {
    const {name, value} = e.target; //Changeëœ ì´ë²¤íŠ¸ íƒœê·¸ì˜(í˜„ì¬ëŠ” input) ì†ì„±ì¸ name ê³¼ value ê°’ì„ ì–»ìŒ.

    setInputs({
        ...inputs,       // 1. ê¸°ì¡´ì˜ ê°’ì„ í¼ì¹¨ ì—°ì‚°ìë¡œ ì¼ë‹¨ ë„£ê³ 
        [name] : value   // 2. ì…ë ¥í•œ íƒœê·¸ì˜ nameì— ê°’ ë³€ê²½
    })
}
```

inputì— onChange í•¨ìˆ˜ ë“±ë¡

```js
ì´ë¦„<input type='text' className='form-control' value = {inputs.name} name='name' onChange={inputChangeEvent}/>
ë‹‰ë„¤ì„<input type='text' className='form-control' value = {inputs.nickName} name='nickName' onChange={inputChangeEvent}/>
ì—°ë½ì²˜<input type='text' className='form-control' value = {inputs.hp} name='hp' onChange={inputChangeEvent}/>
ì£¼ì†Œ<input type='text' className='form-control' value = {inputs.addr} name='addr' onChange={inputChangeEvent}/>
```


#### ë°°ì—´ ì¶”ê°€ ì´ë²¤íŠ¸ 

```js
const addArrayEvent = () => {
    //ê¸°ì¡´ ë°°ì—´ ë°ì´í„°ì— ë¬¶ìŒ ë³€ìˆ˜ì¸ inputs ì¶”ê°€
    setInputArray(inputArray.concat(inputs));
}
```

#### ì…ë ¥ê°’ ì´ˆê¸°í™”

```js
const clearFormEvent = ()=> {
    setInputs({
        name:'',
        nickName: '',
        hp: '',
        addr : ''
    })
}
```

ë²„íŠ¼ì— ì ìš©í•˜ê¸°

```
<Button color='info' variant='outlined' onClick = {addArrayEvent}>ë°°ì—´ì— ì¶”ê°€</Button>
<Button color='info' variant='outlined' onClick = {clearFormEvent}>ì…ë ¥ê°’ ì´ˆê¸°í™”</Button>
```


#### ë°°ì—´ ì¶œë ¥

```js
<table className='table table-bordered' style={{width:'500px'}}>
  <caption align='top'>ë°ì´í„° ê°¯ìˆ˜ : {inputArray.length}</caption>
  <thead>
    <tr>
      <th>ì´ë¦„</th>
      <th>ë‹‰ë„¤ì„</th>
      <th>hp</th>
      <th>ì£¼ì†Œ</th>
    </tr>
  </thead>
  <tbody>
    {
      inputArray.map((item, idx)=>
        <tr key={idx}>
          <td>{item.name}</td>
          <td>{item.nickName}</td>
          <td>{item.hp}</td>
          <td>{item.addr}</td>
        </tr>
      )
    }
  </tbody>
</table>
```

#### delete ê¸°ëŠ¥ ì¶”ê°€


```js
const deleteData= (deleteIdx) =>{
  setInputArray(inputArray.filter((array, idx) => deleteIdx !== idx));
}
```

```js
<span style={{marginLeft:'10px', cursor:'pointer'}}
   onClick ={(e) => deleteData(idx)}>ğŸ—‘ï¸</span>
```


### ë¶€ëª¨/ìì‹ ê°„ í†µì‹ 

* `D_App` : ë¶€ëª¨ ì•±
* `D_Child_App` : ìì‹ ì•±


ë¶€ëª¨ì•±ì—ì„œ ìì‹ì•±ìœ¼ë¡œ ë³€ìˆ˜ê°’ì´ë‚˜ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. (propsë¥¼ í†µí•´ ì „ë‹¬)

ìì‹ì•±ì—ì„œ ë¶€ëª¨ì•±ìœ¼ë¡œ ì§ì ‘ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ëŠ” ì—†ìŒ. ë‹¨, ì´ë²¤íŠ¸ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

ëŒ€ì²´ë¡œëŠ” ë¶€ëª¨ì•±ê°€ ìì‹ì•±ì— ë³´ëƒ„

**íŠ¹ì§• ë‹¤ì‹œ ì •ë¦¬**

1. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ propsë¥¼ í†µí•´ì„œ ê°’ì´ë‚˜ ì´ë²¤íŠ¸ ì „ë‹¬ì„ í•  ìˆ˜ ìˆë‹¤.
2. ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ê°’ì„ props ë¡œ ë°›ì•„ì„œ ì¶œë ¥ì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì§ì ‘ì ìœ¼ë¡œ ë³€ê²½ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
3. ë§Œì•½ ë³€ê²½í•˜ë ¤ë©´ ë¶€ëª¨ì˜ ì´ë²¤íŠ¸ë¥¼ propsë¥¼ í†µí•´ì„œ í˜¸ì¶œì„ í•´ì„œ ê·¸ ì´ë²¤íŠ¸ í•¨ìˆ˜ì—ì„œ ë³€ê²½ì„ í•˜ë©´ ëœë‹¤.
4. props ëŠ” ë¶€ëª¨ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„¤ì •í•˜ë©°, ì»´í¬ë„ŒíŠ¸ ìì‹ ì€ í•´ë‹¹ props ë¥¼ ì½ê¸°ì „ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
5. ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì½ê³  ë˜ ì—…í…Œì´íŠ¸í•˜ë ¤ë©´ stateë¥¼ ì¨ì•¼í•œë‹¤.


#### ë¶€ëª¨ì•± ì„¤ì •

```js
const D_App = (props) => {
  return(
    <div>
      <h3 className='alert alert-danger'>D : ë¶€ëª¨, ìì‹ê°„ í†µì‹ </h3>
      {/* ì•„ë˜ ì†ì„± name, age, addr ì˜ ê°’ì´ propsë¥¼ í†µí•´ ì „ë‹¬ëœë‹¤.*/}
      <D_Child_App name={'ìº”ë””'} age={23} addr={'ì œì£¼ë„'}/>   
      <D_Child_App name={'ì•ˆì˜ë‹ˆ'} age={28} addr={'LA'}/>
      <D_Child_App name={'í…Œë¦¬ìš°ìŠ¤'} age={35} addr={'í•˜ì™€ì´'}/>
    </div>
  )
}

export { D_App }
```

#### ìì‹ì•± ì„¤ì • ë°©ë²• 1

```js
const D_Child_App = (props) => {
  return(
    <div className='box'>
      {props.name}ë‹˜ì˜ ë‚˜ì´ëŠ” {props.age}ì´ë©° ê³ í–¥ì€ {props.addr}ì…ë‹ˆë‹¤.
    </div>
  )
}

export default D_Child_App;  //ë°˜ë“œì‹œ defaultë¡œ ë˜ì–´ìˆì–´ì•¼í•¨.
```

#### ìì‹ì•± ì„¤ì • ë°©ë²• 2

```js
const D_Child_App = (props) => {

  const {name, age, addr} = props;  //ì¶œë ¥ë§Œ ê°€ëŠ¥, ìˆ˜ì •ì€ ë¶ˆê°€ëŠ¥ (ì½ê¸°ì „ìš©)

  return(
    <div className='box'>
      {name}ë‹˜ì˜ ë‚˜ì´ëŠ” {age}ì´ë©° ê³ í–¥ì€ {addr}ì…ë‹ˆë‹¤.
    </div>
  )
}

export default D_Child_App;
```

#### ê²°ê³¼ 

![img_2.png](/devl/react/img/004/img_2.png)


#### ìì‹ì•±ì—ì„œ ë¶€ëª¨ì•±ì´ ê°€ì§„ ë³€ìˆ˜ ë³€ê²½

```js
//ë¶€ëª¨ì•±

const changeCount = ()=> {
  setCount(count + 1)
}

return(
  <div>
    <h3 className='alert alert-danger'>D : ë¶€ëª¨, ìì‹ê°„ í†µì‹ </h3>
    
    <h4>ë°©ë¬¸ íšŸìˆ˜ : {count}íšŒ</h4> {/*ìì‹ì•±ì—ì„œ ë³€ê²½í•  í•­ëª© ìƒì„± */}
    <D_Child_App name={'ìº”ë””'} age={23} addr={'ì œì£¼ë„'} incre={changeCount}/>
    <D_Child_App name={'ì•ˆì˜ë‹ˆ'} age={28} addr={'LA'} incre={changeCount}/>
    <D_Child_App name={'í…Œë¦¬ìš°ìŠ¤'} age={35} addr={'í•˜ì™€ì´'} incre={changeCount}/>
  </div>
)
```

```js
//ìì‹ì•±ì—ì„œ increë¥¼ ë°›ì•„ ì‚¬ìš©ê°€ëŠ¥.

<Button color='info' variant='outlined' size='small'
        onClick = {() => props.incre()}>ì¦ê°€</Button>
```


### í…Œì´ë¸”ì—ì„œ í–‰ë‹¨ì„ ìì‹ì•±ì—ì„œ ì¶œë ¥

#### ë¶€ëª¨ì•± ì„¤ì •

ê°ì²´í˜• ìƒìˆ˜ ì„ ì–¸

```js

const [photoArray, setPhotoArray]=useState([
  {
    fname : 'ë§ê³ ë¹™ìˆ˜',
    fphoto : '1.jpg',
    fprice : '12000',
    fdate : new Date()
  },
  {
    fname : 'ìƒŒë“œìœ„ì¹˜',
    fphoto : '10.jpg',
    fprice : '9900',
    fdate : new Date()
  }
])
```

```js
  <table className='table table-bordered' style={{width:'400px'}}>
  <thead>
    <tr style={{backgroundColor:'palegoldenrod'}}>
      <th>ë²ˆí˜¸</th>
      <th>ë©”ë‰´ëª…</th>
      <th>ê°€ê²©</th>
      <th>ë‚ ì§œ</th>
    </tr>
  </thead>
  <tbody>
    {
      photoArray.map((data, idx)=>(
          <E_RowItem row={data} idx={idx}/>
      ))
    }
  </tbody>
</table>
```

#### ìì‹ì•± ì„¤ì •

```js
//                   â†“ props ëŒ€ì‹  ë¶€ëª¨ì•±ì—ì„œ ì„¤ì •í•œ ì†ì„±ì„ ë°›ë„ë¡ ì„¤ì •.
const E_RowItem = ({row, idx}) => {
  return(
    <tr>
      <td>{idx+1}</td>
      <td><img alt="" src = {require(`../images/${row.fphoto}`)} width='70' height='70' hspace='10'/>{row.fname}</td>
      <td valign='middle'>{row.fprice}</td>
      <td valign='middle'>{row.fdate.toLocaleDateString('ko-KR')}</td>
    </tr>
  )
}
```


### ì…ë ¥ í¼ ë°ì´í„° ì „ë‹¬

```js
//ë°ì´í„° ì¶”ê°€ ì´ë²¤íŠ¸ 
const dataAdd = (data) => {
    setPhotoArray(photoArray.concat({
        ...data,
        fdate : new Date()
    }))
}
```

```js
{/* ë¶€ëª¨ì•±ì— ì…ë ¥ í¼ ì¶”ê°€*/}
<E_RowItem onSave = {dataAdd()}/>
<br/>
```

```js
//ìì‹ì•± 

const E_WriteForm = ({onSave}) => {

  const [fname, setFname] = useState('');
  const [fphoto, setFphoto] = useState('2.jpg');
  const [fprice, setFprice] = useState(0);

  const onAddEvent= () => {
    onSave({fname, fphoto, fprice});

    //ì´ˆê¸°í™”
    setFname('');
    setFprice(0);
  }

  return(
    <div className='input-group'>
      ë©”ë‰´ëª… :
      <input type='text' value={fname} onChange={(e)=> setFname(e.target.value)}
             style={{width:'100px'}} />

      ê°€ê²© :
      <input type='text'
             value={fprice} onChange={(e)=> setFprice(e.target.value)} style={{width:'70px'}} />

      ì‚¬ì§„ :
      <select onChange={(e)=> setFphoto(e.target.value)}>
        <option value={'2.jpg'}>ì‚¬ì§„1</option>
        <option value={'12.jpg'}>ì‚¬ì§„2</option>
        <option value={'15.jpg'}>ì‚¬ì§„3</option>
      </select>
      <Button color='warning' varuabt='outlined' size = "small" onClick ={onAddEvent}>ì¶”ê°€</Button>
    </div>
  )
}
```


### ë°ì´í„° ì‚­ì œ

```js
//ë¶€ëª¨ì•± 

const deleteData = (deleteIdx) => {
  setPhotoArray(photoArray.filter((array, idx) => deleteIdx !== idx));
}
```



#### ìì‹ì•±ìœ¼ë¡œ ë°ì´í„° ì „ë‹¬ 

```js
<tbody>
  {
    photoArray.map((data, idx)=>(<E_RowItem row={data} idx={idx} 
                                            onDelete={deleteData}/>))
  }
</tbody>
```

#### ë¶€ëª¨ì•± onDelete í˜¸ì¶œ

```js
const E_RowItem = ({row, idx, onDelete}) => {
    ....
  <td valign='middle'>
    <span style={{curser:'pointer'}} onClick={()=> onDelete(idx)}>ğŸ—‘ï¸</span> ï¸
  </td>
}
```


### jsonë°ì´í„° ì¶œë ¥

```js
{
    "navData": [
        {
        "img" : "https://image.ohou.se/image/resize/bucketplace-v2-development/uploads-shortcut-home_feed_shortcut_sets-166485672496321483.png/512/none",
        "title" :  "ì‡¼í•‘í•˜ê¸°"
    }, 
    {
        "img" : "https://image.ohou.se/image/resize/bucketplace-v2-development/uploads-shortcut-home_feed_shortcut_sets-166528077592274715.png/512/none",
        "title" : "ì˜ì‹ì£¼ì˜ˆê³ "
    },
    {
        "img" : "https://image.ohou.se/image/resize/bucketplace-v2-development/uploads-shortcut-home_feed_shortcut_sets-166485696782888460.png/512/none",
        "title" :  "ì˜¤ëŠ˜ì˜ë”œ"
    }, 
]
}
```

```js
const navData = cate.navData;

//ì´ë¯¸ì§€ì— ì ìš©í•  ref ë³€ìˆ˜ ì„ ì–¸
const mainPhotoRef = useRef(null);
```

```js
 <div className='nav_container'>
  <ul className='nav_category'>
    {
      navData.map((item, idx) =>
        <li key = {idx}>
          <div><img alt="" src={item.img} className='imgcategory'
                    onClick={(e)=> {
                      mainPhotoRef.current.src = e.target.src;
                    }}/></div>
          <div style={{textAlign:'center'}}>{item.title}</div>
        </li>
      )
    }
  </ul>
</div>

{/* ì•„ì´ì½˜ í´ë¦¬ì‹œ  ì‘ì€ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ ì¶œë ¥í•  ë©”ì¸ ì´ë¯¸ì§€*/}
<div>
  <img alt='' src ='' style={{width:'300px', height:'300px', border:'5px inset gray', margin: '50px 300px'}}
       ref={mainPhotoRef}/>
</div>
```

